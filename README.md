# Тестовое задание от O Complex

Сделать web приложение, оно же сайт, где пользователь вводит название города, и получает прогноз погоды в этом городе на ближайшее время.

## Что было сделанно

Для создания web приложения использовал `Django`

### 1. *Написаны тесты*

Тесты можно запускать после запуска контейнера через команду:

```sh
docker compose exec web python manage.py test
```

### 2. *Всё это помещено в докер контейнер*

От себя добавил конфигуацию веб сервера `nginx` теперь приложение будет работать через host `localhost:80`. Запуск django проекта было зделанно через `gunicorn`. Поменял db на `PostgreSQL`.

### 3. *Сделаны автодополнение (подсказки) при вводе города*

При каждом вводе пользователья в `search input`, JavaScript код отправлял запрос на endpoint `/search/<query>/` что возвращало список совпадений 

### 4. *При повторном посещении сайта будет предложено посмотреть погоду в городе, в котором пользователь уже смотрел ранее*

Было реализованно с помощью добавления в `Cookie` название последнего города, что пользователь посмотрел ранее и `JavaScript` кодом который при повторном посещении сайта предложит посмотреть погоду в городе сохронненым в `Cookie`.

### 5. *Будет сохраняться история поиска для каждого пользователя, и будет API, показывающее сколько раз вводили какой город*

Было сделанно через `Redis`. Данные можно получить через endpoint `/cities/views/`.


## Запуск

**Предварительные требования**
- Docker

**Шаги**
1. Клонирование репозитория:

   ```sh
   git clone https://github.com/Aren2020/test-task-o-complex.git
   cd test-task-o-complex
   ```

2. Создать свой `.env` file (пример файла):

   ```sh
   DEBUG=0
   SECRET_KEY=YOUR_SECRET_KEY
   DJANGO_ALLOWED_HOSTS=* 
   POSTGRES_DB=postgres
   POSTGRES_USER=postgres
   POSTGRES_PASSWORD=postgres
   REDIS_HOST=redis
   REDIS_PORT=6379
   REDIS_DB=0
   ```
   
4. Сборка Docker образа:
   ```sh
   docker-compose build
   ```

5. Запуск Docker контейнеров:

   ```sh
   docker-compose up
   ```

6. Применение миграций:

   ```
   docker-compose exec web python manage.py migrate
   ```

7. Доступ к приложению: Откройте веб-браузер и перейдите по адресу `http://localhost:80`.


## От себя

Благодарю за предоставленное тестовое задание. Готов ответить на вопросы и обсудить детали дальнейших шагов.

`aren.allahverdyan@gmail.com`

`https:/t.me/arenallahverdyan`
